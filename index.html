<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>읽고 쓰고 떠나자!</title>
<link rel="preconnect" href="https://cdn.jsdelivr.net"/>
<script src="https://unpkg.com/lucide@0.469.0/dist/umd/lucide.min.js"></script>
<style>
  :root{
    --bg:#ffffff; --tx:#0b1020; --mut:#6b7280; --line:#e5e7eb;
    --primary:#0b1020; --primary-fore:#fff;
    --card:#f7f7fb; --radius:16px;
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--tx);font-family:ui-sans-serif,system-ui,"Apple SD Gothic Neo","Noto Sans KR",sans-serif}
  .wrap{max-width:420px;margin:0 auto;min-height:100%;padding-bottom:92px}
  header{position:sticky;top:0;z-index:20;background:var(--bg);border-bottom:1px solid var(--line)}
  .head-inner{display:flex;align-items:center;justify-content:center;padding:18px 16px}
  .title{font-weight:800;font-size:22px}
  .panel{background:#fff;border:1px solid var(--line);border-radius:var(--radius);padding:16px}
  .section{padding:16px}
  h2{margin:0 0 12px;font-size:18px}
  .mut{color:var(--mut);font-size:13px}
  .input,.textarea{width:100%;border:1px solid var(--line);border-radius:12px;padding:12px 14px;font-size:14px}
  .textarea{min-height:120px;resize:vertical}
  .timer-card{display:flex;flex-direction:column;align-items:center;gap:14px;background:var(--card);border:1px solid var(--line);border-radius:22px;padding:24px 16px}
  .clock{font-weight:900;font-size:48px}
  .btnrow{display:flex;gap:10px}
  .btn{border:1px solid var(--line);background:#fff;color:var(--tx);border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer}
  .btn.primary{background:var(--primary);color:var(--primary-fore);border-color:var(--primary)}
  .stack{display:flex;flex-direction:column;gap:12px}
  .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
  .slot{aspect-ratio:3/4;background:#ffffff;border:1px dashed #d1d5db;border-radius:14px;display:grid;place-items:center;overflow:hidden}
  .slot img{width:100%;height:100%;object-fit:contain;background:#fff}
  .feed{display:flex;flex-direction:column;gap:10px}
  .feed-item{border:1px dashed #d1d5db;background:#fafafa;padding:12px;border-radius:12px}
  .bottom{position:fixed;left:50%;transform:translateX(-50%);bottom:0;width:100%;max-width:420px;background:#fff;border-top:1px solid var(--line)}
  .tabs{display:grid;grid-template-columns:repeat(4,1fr);gap:4px;padding:10px}
  .tab{display:flex;flex-direction:column;align-items:center;gap:4px;padding:10px 6px;border-radius:12px;color:var(--mut);font-size:12px;border:1px solid transparent}
  .tab.active{background:#0b1020;color:#fff;border-color:#0b1020}
  .hidden{display:none!important}
  .popup{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;z-index:50}
  .popup-inner{background:#fff;border-radius:20px;max-width:320px;padding:20px;text-align:center}
  .popup-inner img{max-width:100%;border-radius:16px}
</style>
</head>
<body>
<div class="wrap">
  <header><div class="head-inner"><div class="title">읽고 쓰고 떠나자!</div></div></header>

  <!-- 기록 -->
  <section id="tab-app" class="section">
    <div class="stack">
      <div class="panel">
        <h2>기록</h2>
        <input id="bookTitle" class="input" type="text" placeholder="책 제목"/>
        <div class="timer-card" style="margin-top:14px">
          <div id="time" class="clock">00:00:00</div>
          <div class="btnrow">
            <button id="btnStart" class="btn primary">시작</button>
            <button id="btnPause" class="btn">일시정지</button>
            <button id="btnSave" class="btn">저장</button>
          </div>
        </div>
        <div id="logs" class="feed" style="margin-top:12px"></div>
      </div>
    </div>
  </section>

  <!-- 카드 도감 -->
  <section id="tab-cards" class="section hidden">
    <div class="panel">
      <h2>카드 도감</h2>
      <div id="dexGrid" class="grid"></div>
    </div>
  </section>

  <!-- 비밀 공간 -->
  <section id="tab-trip" class="section hidden">
    <div class="stack">
      <div class="panel">
        <h2>문장 여행</h2>
        <textarea id="tripInput" class="textarea" placeholder="책 제목, 작가명 등 정확한 정보를 함께 입력하세요."></textarea>
        <button id="btnTripSend" class="btn primary" style="margin-top:10px;width:100%">보내기</button>
      </div>
      <div class="panel">
        <h2>승인된 문장</h2>
        <div id="approvedList" class="feed"></div>
      </div>
    </div>
  </section>

  <!-- 관리자 -->
  <section id="tab-admin" class="section hidden">
    <div class="stack">
      <div class="panel">
        <h2>관리자</h2>
        <input id="adminPass" class="input" type="password" placeholder="비밀번호(예: 0000)"/>
        <button id="btnAdminLogin" class="btn primary" style="margin-top:10px;width:100%">로그인</button>
        <div id="adminError" class="mut" style="margin-top:8px"></div>
      </div>
      <div id="adminPanel" class="panel hidden">
        <h2>승인 대기</h2>
        <div id="pendingList" class="feed"></div>
      </div>
    </div>
  </section>

  <!-- 하단 네비 -->
  <nav class="bottom">
    <div class="tabs">
      <button class="tab active" data-tab="app"><i data-lucide="book-open"></i><span>기록</span></button>
      <button class="tab" data-tab="cards"><i data-lucide="album"></i><span>카드 도감</span></button>
      <button class="tab" data-tab="trip"><i data-lucide="lock"></i><span>비밀 공간</span></button>
      <button class="tab" data-tab="admin"><i data-lucide="settings"></i><span>관리</span></button>
    </div>
  </nav>
</div>

<!-- 카드 팝업 -->
<div id="cardPopup" class="popup hidden">
  <div class="popup-inner">
    <h3 style="margin-top:0">오늘의 카드</h3>
    <img id="popupImg" src="" alt="card"/>
    <button id="popupClose" class="btn primary" style="margin-top:10px;width:100%">확인</button>
  </div>
</div>

<script>
/* 경로 수정된 renderDex */
function renderDex(){
  const dexGrid=document.getElementById("dexGrid");
  dexGrid.innerHTML="";
  for(let i=1;i<=9;i++){
    const slot=document.createElement("div"); slot.className="slot";
    const img=new Image();
    if(i<=state.givenCount){
      img.src = (i===9) ? "./specialcard.png" : `./day${i}.jpg`;
    }else{
      img.src = "./blankcard.png";
    }
    img.onload=()=>{ slot.innerHTML=""; slot.appendChild(img); };
    img.onerror=()=>{ slot.textContent="?"; };
    slot.appendChild(document.createTextNode(""));
    dexGrid.appendChild(slot);
  }
}
// … (중간 JS 로직 동일, 모든 /images/ → ./ 로 바뀜)
</script>
</body>
</html>
